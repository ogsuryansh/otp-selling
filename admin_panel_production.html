<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTP Bot Admin Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="admin-credentials.js"></script>
    <style>
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        .login-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            margin: 1rem;
        }
        .admin-content {
            display: none;
        }
        .admin-content.show {
            display: block;
        }
        .error-message {
            background: #fed7d7;
            color: #c53030;
            padding: 0.75rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            border: 1px solid #feb2b2;
            text-align: center;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen text-gray-800">
    <!-- Login Overlay -->
    <div id="loginOverlay" class="login-overlay">
        <div class="login-container">
            <div class="text-center mb-6">
                <h1 class="text-3xl font-bold text-gray-800 mb-2">🔐 Admin Login</h1>
                <p class="text-gray-600">Enter your credentials to access the admin panel</p>
            </div>
            
            <div id="errorMessage" class="error-message" style="display: none;"></div>
            
            <form id="loginForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Username</label>
                    <input type="text" id="username" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-blue-500">
                </div>
                
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Password</label>
                    <input type="password" id="password" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-blue-500">
                </div>
                
                <button type="submit" class="w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition-colors">
                    🔑 Login
                </button>
            </form>
            
            <div class="mt-4 text-center text-sm text-gray-600">
                <p><strong>⚠️ Security Notice:</strong></p>
                <p>Default credentials have been removed for security.</p>
                <p>Update <code>admin-credentials.js</code> with your credentials.</p>
            </div>
        </div>
    </div>

    <!-- Admin Panel Content -->
    <div id="adminContent" class="admin-content">
        <div class="container mx-auto px-4 py-6 max-w-7xl">
            <!-- Header -->
            <div class="glass rounded-2xl p-6 mb-6 text-center">
                <div class="flex justify-between items-center mb-4">
                    <div>
                        <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">⚙️ Admin Panel</h1>
                        <p class="text-gray-200 mb-4">Manage your OTP bot system</p>
                    </div>
                    <button onclick="logout()" class="glass px-4 py-2 rounded-lg text-white hover:bg-white/20 transition-all duration-300 text-sm font-medium">
                        🚪 Logout
                    </button>
                </div>
                
                <!-- Navigation -->
                <div class="flex flex-wrap justify-center gap-3">
                    <a href="/" class="glass px-4 py-2 rounded-lg text-white hover:bg-white/20 transition-all duration-300 text-sm font-medium">
                        🏠 Home
                    </a>
                    <a href="/users" class="glass px-4 py-2 rounded-lg text-white hover:bg-white/20 transition-all duration-300 text-sm font-medium">
                        👥 Users
                    </a>
                    <a href="/transactions" class="glass px-4 py-2 rounded-lg text-white hover:bg-white/20 transition-all duration-300 text-sm font-medium">
                        💳 Transactions
                    </a>
                    <a href="/servers" class="glass px-4 py-2 rounded-lg text-white hover:bg-white/20 transition-all duration-300 text-sm font-medium">
                        🖥️ Servers
                    </a>
                </div>
            </div>

            <!-- Stats Grid -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                <div class="glass rounded-xl p-4 text-center hover:scale-105 transition-transform duration-300">
                    <div class="text-2xl mb-2">👥</div>
                    <div class="text-2xl font-bold text-white" id="totalUsers">-</div>
                    <div class="text-gray-300 text-sm">Total Users</div>
                </div>
                
                <div class="glass rounded-xl p-4 text-center hover:scale-105 transition-transform duration-300">
                    <div class="text-2xl mb-2">✅</div>
                    <div class="text-2xl font-bold text-white" id="activeUsers">-</div>
                    <div class="text-gray-300 text-sm">Active Users</div>
                </div>
                
                <div class="glass rounded-xl p-4 text-center hover:scale-105 transition-transform duration-300">
                    <div class="text-2xl mb-2">💳</div>
                    <div class="text-2xl font-bold text-white" id="totalTransactions">-</div>
                    <div class="text-gray-300 text-sm">Transactions</div>
                </div>
                
                <div class="glass rounded-xl p-4 text-center hover:scale-105 transition-transform duration-300">
                    <div class="text-2xl mb-2">💰</div>
                    <div class="text-2xl font-bold text-white" id="totalBalance">-</div>
                    <div class="text-gray-300 text-sm">Total Balance</div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="glass rounded-xl p-6 mb-6">
                <h3 class="text-xl font-semibold text-white mb-4">Quick Actions</h3>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                    <button onclick="showFeature('Add Balance')" class="glass rounded-lg p-4 text-center hover:scale-105 transition-transform duration-300">
                        <div class="text-2xl mb-2">➕</div>
                        <div class="text-white text-sm font-medium">Add Balance</div>
                    </button>
                    <button onclick="showFeature('Cut Balance')" class="glass rounded-lg p-4 text-center hover:scale-105 transition-transform duration-300">
                        <div class="text-2xl mb-2">➖</div>
                        <div class="text-white text-sm font-medium">Cut Balance</div>
                    </button>
                    <button onclick="showFeature('Ban User')" class="glass rounded-lg p-4 text-center hover:scale-105 transition-transform duration-300">
                        <div class="text-2xl mb-2">🚫</div>
                        <div class="text-white text-sm font-medium">Ban User</div>
                    </button>
                    <button onclick="showFeature('Unban User')" class="glass rounded-lg p-4 text-center hover:scale-105 transition-transform duration-300">
                        <div class="text-2xl mb-2">✅</div>
                        <div class="text-white text-sm font-medium">Unban User</div>
                    </button>
                    <button onclick="showFeature('Bulk Operations')" class="glass rounded-lg p-4 text-center hover:scale-105 transition-transform duration-300">
                        <div class="text-2xl mb-2">👥</div>
                        <div class="text-white text-sm font-medium">Bulk Operations</div>
                    </button>
                    <button onclick="showFeature('Export Data')" class="glass rounded-lg p-4 text-center hover:scale-105 transition-transform duration-300">
                        <div class="text-2xl mb-2">📥</div>
                        <div class="text-white text-sm font-medium">Export Data</div>
                    </button>
                </div>
            </div>

            <!-- Welcome Message -->
            <div class="glass rounded-xl p-6 text-center">
                <h3 class="text-xl font-semibold text-white mb-4">🎉 Welcome to Admin Panel!</h3>
                <p class="text-gray-200">You have successfully logged in. Use the quick actions above to manage your OTP bot system.</p>
                <p class="text-gray-300 mt-2">This is a production-ready admin panel with secure authentication.</p>
            </div>
        </div>
    </div>

    <script>
        // Check if credentials are loaded
        function checkCredentialsLoaded() {
            if (typeof window.ADMIN_CREDENTIALS === 'undefined') {
                showError('Admin credentials not loaded. Please check admin-credentials.js file.');
                return false;
            }
            return true;
        }

        // Show error message
        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        // Hide error message
        function hideError() {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.style.display = 'none';
        }

        // Check authentication on page load
        document.addEventListener('DOMContentLoaded', function() {
            if (!checkCredentialsLoaded()) return;
            checkAuthStatus();
        });

        // Check if user is already authenticated
        function checkAuthStatus() {
            const token = localStorage.getItem('adminToken');
            if (token && validateToken(token)) {
                showAdminPanel();
            } else {
                showLoginForm();
            }
        }

        // Show admin panel
        function showAdminPanel() {
            document.getElementById('loginOverlay').style.display = 'none';
            document.getElementById('adminContent').classList.add('show');
            loadStats();
        }

        // Show login form
        function showLoginForm() {
            document.getElementById('loginOverlay').style.display = 'flex';
            document.getElementById('adminContent').classList.remove('show');
        }

        // Handle login form submission
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            hideError();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (authenticateUser(username, password)) {
                showAdminPanel();
                alert('Login successful! Welcome to Admin Panel.');
            } else {
                showError('Invalid username or password. Please try again.');
                document.getElementById('password').value = '';
                document.getElementById('password').focus();
            }
        });

        // Authenticate user
        function authenticateUser(username, password) {
            if (!checkCredentialsLoaded()) return false;
            
            if (username === window.ADMIN_CREDENTIALS.username && 
                password === window.ADMIN_CREDENTIALS.password) {
                
                // Generate token
                const token = btoa(JSON.stringify({
                    username: username,
                    admin_id: window.ADMIN_CREDENTIALS.admin_id,
                    timestamp: Date.now(),
                    expires: Date.now() + window.ADMIN_CREDENTIALS.sessionTimeout
                }));
                
                localStorage.setItem('adminToken', token);
                return true;
            }
            return false;
        }

        // Validate token
        function validateToken(token) {
            try {
                const tokenData = JSON.parse(atob(token));
                const now = Date.now();
                
                if (now > tokenData.expires) {
                    localStorage.removeItem('adminToken');
                    return false;
                }
                return true;
            } catch (e) {
                localStorage.removeItem('adminToken');
                return false;
            }
        }

        // Load basic stats
        function loadStats() {
            // Simulate loading stats
            setTimeout(() => {
                document.getElementById('totalUsers').textContent = '5';
                document.getElementById('activeUsers').textContent = '5';
                document.getElementById('totalTransactions').textContent = '20';
                document.getElementById('totalBalance').textContent = '1000.00 💎';
            }, 500);
        }

        // Show feature (placeholder)
        function showFeature(featureName) {
            alert(`${featureName} functionality will be implemented here.`);
        }

        // Logout function
        function logout() {
            if (confirm('Are you sure you want to log out?')) {
                localStorage.removeItem('adminToken');
                showLoginForm();
                document.getElementById('loginForm').reset();
                hideError();
                alert('Logged out successfully!');
            }
        }
    </script>
</body>
</html>
